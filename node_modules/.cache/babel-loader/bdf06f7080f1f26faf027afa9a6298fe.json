{"ast":null,"code":"var _jsxFileName = \"/Users/nojeong-eun/Desktop/MagazineK_jeongeun/src/components/Nav/Cart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport ProdInCart from './ProdInCart';\nimport './Cart.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Cart = _ref => {\n  _s();\n\n  let {\n    toggleCart,\n    modalState,\n    setModalState\n  } = _ref;\n  const [cartData, setCartData] = useState([]);\n  const [totalOrderNum, setTotalOrderNum] = useState(0);\n  const [priceList, setPriceList] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [isEmpty, setIsEmpty] = useState(true);\n  const navigate = useNavigate();\n  const token = localStorage.getItem('login-token') || '';\n\n  const scrollUp = () => {\n    window.scroll({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n\n  const decreaseTotalOrderNum = () => {\n    if (totalOrderNum < 2) {\n      setTotalOrderNum(1);\n    } else if (totalOrderNum < cartData.length + 1) {\n      setTotalOrderNum(cartData.length);\n    } else {\n      setTotalOrderNum(totalOrderNum => totalOrderNum - 1);\n    }\n  };\n\n  const increaseTotalOrderNum = () => {\n    setTotalOrderNum(totalOrderNum => totalOrderNum + 1);\n  };\n\n  const deleteProduct = (prodIndex, orderNum) => {\n    setCartData(cartData.filter((prod, idx) => {\n      if (prodIndex === idx) {\n        setTotalOrderNum(totalOrderNum - orderNum);\n      }\n\n      return prodIndex !== idx;\n    }));\n  };\n\n  const deleteCartData = (product_id, prodIndex, orderNum) => {\n    if (window.confirm('선택하신 상품을 삭제하시겠습니까?')) {\n      fetch(`http://10.58.3.49:8000/orders/cart/${product_id}`, {\n        method: 'DELETE',\n        headers: {\n          AUTHORIZATION: token\n        }\n      }).then(res => res.json()).then(res => {\n        if (res.message === 'SUCCESS') {\n          deleteProduct(prodIndex, orderNum);\n        }\n      });\n    }\n  };\n\n  const getCartData = () => {\n    if (token) {\n      fetch('http://10.58.3.49:8000/orders/cart', {\n        method: 'GET',\n        headers: {\n          AUTHORIZATION: token\n        }\n      }).then(res => res.json()).then(res => {\n        if (res.message === 'EMPTY CART') {\n          return;\n        } else {\n          setCartData(res.result[0].product);\n          let sum = 0;\n          res.result[0].product.forEach(product => {\n            sum = sum + product.quantity;\n          });\n          setTotalOrderNum(sum);\n        }\n      });\n    }\n  };\n\n  const calculateTotalPrice = () => {\n    let sum = 0;\n    priceList.forEach(el => {\n      sum = el + sum;\n    });\n    setTotalPrice(sum);\n  };\n\n  useEffect(() => {\n    getCartData();\n  }, [modalState]);\n  useEffect(() => {\n    setPriceList(Array(cartData.length).fill());\n    setIsEmpty(cartData.length === 0 ? true : false);\n  }, [cartData]);\n  useEffect(() => {\n    calculateTotalPrice();\n  }, [cartData, totalOrderNum, priceList]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: ['cartModal', modalState && 'cartModalOn'].join(' '),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cartNav\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Cart[\", totalOrderNum, \"]\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        onClick: toggleCart,\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cartMain\",\n      children: [isEmpty && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uAC00 \\uBE44\\uC5B4 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"prodInCartContainer\",\n        children: cartData.map((cartData, idx) => {\n          return /*#__PURE__*/_jsxDEV(ProdInCart, {\n            cartData: cartData,\n            decreaseTotalOrderNum: decreaseTotalOrderNum,\n            increaseTotalOrderNum: increaseTotalOrderNum,\n            priceList: priceList,\n            idx: idx,\n            setPriceList: setPriceList,\n            deleteCartData: deleteCartData,\n            token: token,\n            modalState: modalState\n          }, cartData.product_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cartFooter\",\n      onClick: () => {\n        if (token) {\n          navigate('/Pay');\n          scrollUp();\n          setModalState(false);\n        } else {\n          alert('로그인이 필요한 기능입니다.');\n          navigate('/Login');\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u20A9\", totalPrice, \",000 VIEW ALL\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Cart, \"7QO1ksZdr6j9T3anZxeS1geoOOs=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ProdInCart","Cart","toggleCart","modalState","setModalState","cartData","setCartData","totalOrderNum","setTotalOrderNum","priceList","setPriceList","totalPrice","setTotalPrice","isEmpty","setIsEmpty","navigate","token","localStorage","getItem","scrollUp","window","scroll","top","behavior","decreaseTotalOrderNum","length","increaseTotalOrderNum","deleteProduct","prodIndex","orderNum","filter","prod","idx","deleteCartData","product_id","confirm","fetch","method","headers","AUTHORIZATION","then","res","json","message","getCartData","result","product","sum","forEach","quantity","calculateTotalPrice","el","Array","fill","join","map","alert"],"sources":["/Users/nojeong-eun/Desktop/MagazineK_jeongeun/src/components/Nav/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport ProdInCart from './ProdInCart';\nimport './Cart.scss';\n\nconst Cart = ({ toggleCart, modalState, setModalState }) => {\n  const [cartData, setCartData] = useState([]);\n  const [totalOrderNum, setTotalOrderNum] = useState(0);\n  const [priceList, setPriceList] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [isEmpty, setIsEmpty] = useState(true);\n  const navigate = useNavigate();\n  const token = localStorage.getItem('login-token') || '';\n\n  const scrollUp = () => {\n    window.scroll({\n      top: 0,\n      behavior: 'smooth',\n    });\n  };\n\n  const decreaseTotalOrderNum = () => {\n    if (totalOrderNum < 2) {\n      setTotalOrderNum(1);\n    } else if (totalOrderNum < cartData.length + 1) {\n      setTotalOrderNum(cartData.length);\n    } else {\n      setTotalOrderNum(totalOrderNum => totalOrderNum - 1);\n    }\n  };\n\n  const increaseTotalOrderNum = () => {\n    setTotalOrderNum(totalOrderNum => totalOrderNum + 1);\n  };\n\n  const deleteProduct = (prodIndex, orderNum) => {\n    setCartData(\n      cartData.filter((prod, idx) => {\n        if (prodIndex === idx) {\n          setTotalOrderNum(totalOrderNum - orderNum);\n        }\n        return prodIndex !== idx;\n      })\n    );\n  };\n\n  const deleteCartData = (product_id, prodIndex, orderNum) => {\n    if (window.confirm('선택하신 상품을 삭제하시겠습니까?')) {\n      fetch(`http://10.58.3.49:8000/orders/cart/${product_id}`, {\n        method: 'DELETE',\n        headers: {\n          AUTHORIZATION: token,\n        },\n      })\n        .then(res => res.json())\n        .then(res => {\n          if (res.message === 'SUCCESS') {\n            deleteProduct(prodIndex, orderNum);\n          }\n        });\n    }\n  };\n\n  const getCartData = () => {\n    if (token) {\n      fetch('http://10.58.3.49:8000/orders/cart', {\n        method: 'GET',\n        headers: {\n          AUTHORIZATION: token,\n        },\n      })\n        .then(res => res.json())\n        .then(res => {\n          if (res.message === 'EMPTY CART') {\n            return;\n          } else {\n            setCartData(res.result[0].product);\n            let sum = 0;\n            res.result[0].product.forEach(product => {\n              sum = sum + product.quantity;\n            });\n            setTotalOrderNum(sum);\n          }\n        });\n    }\n  };\n\n  const calculateTotalPrice = () => {\n    let sum = 0;\n    priceList.forEach(el => {\n      sum = el + sum;\n    });\n    setTotalPrice(sum);\n  };\n\n  useEffect(() => {\n    getCartData();\n  }, [modalState]);\n\n  useEffect(() => {\n    setPriceList(Array(cartData.length).fill());\n    setIsEmpty(cartData.length === 0 ? true : false);\n  }, [cartData]);\n\n  useEffect(() => {\n    calculateTotalPrice();\n  }, [cartData, totalOrderNum, priceList]);\n\n  return (\n    <div className={['cartModal', modalState && 'cartModalOn'].join(' ')}>\n      <div className=\"cartNav\">\n        <span>Cart[{totalOrderNum}]</span>\n        <span onClick={toggleCart}>Close</span>\n      </div>\n      <div className=\"cartMain\">\n        {isEmpty && (\n          <div className=\"empty\">\n            <p>장바구니가 비어 있습니다.</p>\n          </div>\n        )}\n        <div className=\"prodInCartContainer\">\n          {cartData.map((cartData, idx) => {\n            return (\n              <ProdInCart\n                key={cartData.product_id}\n                cartData={cartData}\n                decreaseTotalOrderNum={decreaseTotalOrderNum}\n                increaseTotalOrderNum={increaseTotalOrderNum}\n                priceList={priceList}\n                idx={idx}\n                setPriceList={setPriceList}\n                deleteCartData={deleteCartData}\n                token={token}\n                modalState={modalState}\n              />\n            );\n          })}\n        </div>\n      </div>\n      <div\n        className=\"cartFooter\"\n        onClick={() => {\n          if (token) {\n            navigate('/Pay');\n            scrollUp();\n            setModalState(false);\n          } else {\n            alert('로그인이 필요한 기능입니다.');\n            navigate('/Login');\n          }\n        }}\n      >\n        <span>₩{totalPrice},000 VIEW ALL</span>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAO,aAAP;;;AAEA,MAAMC,IAAI,GAAG,QAA+C;EAAA;;EAAA,IAA9C;IAAEC,UAAF;IAAcC,UAAd;IAA0BC;EAA1B,CAA8C;EAC1D,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACU,aAAD,EAAgBC,gBAAhB,IAAoCX,QAAQ,CAAC,CAAD,CAAlD;EACA,MAAM,CAACY,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACc,UAAD,EAAaC,aAAb,IAA8Bf,QAAQ,CAAC,CAAD,CAA5C;EACA,MAAM,CAACgB,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAC,IAAD,CAAtC;EACA,MAAMkB,QAAQ,GAAGhB,WAAW,EAA5B;EACA,MAAMiB,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,KAAuC,EAArD;;EAEA,MAAMC,QAAQ,GAAG,MAAM;IACrBC,MAAM,CAACC,MAAP,CAAc;MACZC,GAAG,EAAE,CADO;MAEZC,QAAQ,EAAE;IAFE,CAAd;EAID,CALD;;EAOA,MAAMC,qBAAqB,GAAG,MAAM;IAClC,IAAIjB,aAAa,GAAG,CAApB,EAAuB;MACrBC,gBAAgB,CAAC,CAAD,CAAhB;IACD,CAFD,MAEO,IAAID,aAAa,GAAGF,QAAQ,CAACoB,MAAT,GAAkB,CAAtC,EAAyC;MAC9CjB,gBAAgB,CAACH,QAAQ,CAACoB,MAAV,CAAhB;IACD,CAFM,MAEA;MACLjB,gBAAgB,CAACD,aAAa,IAAIA,aAAa,GAAG,CAAlC,CAAhB;IACD;EACF,CARD;;EAUA,MAAMmB,qBAAqB,GAAG,MAAM;IAClClB,gBAAgB,CAACD,aAAa,IAAIA,aAAa,GAAG,CAAlC,CAAhB;EACD,CAFD;;EAIA,MAAMoB,aAAa,GAAG,CAACC,SAAD,EAAYC,QAAZ,KAAyB;IAC7CvB,WAAW,CACTD,QAAQ,CAACyB,MAAT,CAAgB,CAACC,IAAD,EAAOC,GAAP,KAAe;MAC7B,IAAIJ,SAAS,KAAKI,GAAlB,EAAuB;QACrBxB,gBAAgB,CAACD,aAAa,GAAGsB,QAAjB,CAAhB;MACD;;MACD,OAAOD,SAAS,KAAKI,GAArB;IACD,CALD,CADS,CAAX;EAQD,CATD;;EAWA,MAAMC,cAAc,GAAG,CAACC,UAAD,EAAaN,SAAb,EAAwBC,QAAxB,KAAqC;IAC1D,IAAIT,MAAM,CAACe,OAAP,CAAe,oBAAf,CAAJ,EAA0C;MACxCC,KAAK,CAAE,sCAAqCF,UAAW,EAAlD,EAAqD;QACxDG,MAAM,EAAE,QADgD;QAExDC,OAAO,EAAE;UACPC,aAAa,EAAEvB;QADR;MAF+C,CAArD,CAAL,CAMGwB,IANH,CAMQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EANf,EAOGF,IAPH,CAOQC,GAAG,IAAI;QACX,IAAIA,GAAG,CAACE,OAAJ,KAAgB,SAApB,EAA+B;UAC7BhB,aAAa,CAACC,SAAD,EAAYC,QAAZ,CAAb;QACD;MACF,CAXH;IAYD;EACF,CAfD;;EAiBA,MAAMe,WAAW,GAAG,MAAM;IACxB,IAAI5B,KAAJ,EAAW;MACToB,KAAK,CAAC,oCAAD,EAAuC;QAC1CC,MAAM,EAAE,KADkC;QAE1CC,OAAO,EAAE;UACPC,aAAa,EAAEvB;QADR;MAFiC,CAAvC,CAAL,CAMGwB,IANH,CAMQC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EANf,EAOGF,IAPH,CAOQC,GAAG,IAAI;QACX,IAAIA,GAAG,CAACE,OAAJ,KAAgB,YAApB,EAAkC;UAChC;QACD,CAFD,MAEO;UACLrC,WAAW,CAACmC,GAAG,CAACI,MAAJ,CAAW,CAAX,EAAcC,OAAf,CAAX;UACA,IAAIC,GAAG,GAAG,CAAV;UACAN,GAAG,CAACI,MAAJ,CAAW,CAAX,EAAcC,OAAd,CAAsBE,OAAtB,CAA8BF,OAAO,IAAI;YACvCC,GAAG,GAAGA,GAAG,GAAGD,OAAO,CAACG,QAApB;UACD,CAFD;UAGAzC,gBAAgB,CAACuC,GAAD,CAAhB;QACD;MACF,CAlBH;IAmBD;EACF,CAtBD;;EAwBA,MAAMG,mBAAmB,GAAG,MAAM;IAChC,IAAIH,GAAG,GAAG,CAAV;IACAtC,SAAS,CAACuC,OAAV,CAAkBG,EAAE,IAAI;MACtBJ,GAAG,GAAGI,EAAE,GAAGJ,GAAX;IACD,CAFD;IAGAnC,aAAa,CAACmC,GAAD,CAAb;EACD,CAND;;EAQAjD,SAAS,CAAC,MAAM;IACd8C,WAAW;EACZ,CAFQ,EAEN,CAACzC,UAAD,CAFM,CAAT;EAIAL,SAAS,CAAC,MAAM;IACdY,YAAY,CAAC0C,KAAK,CAAC/C,QAAQ,CAACoB,MAAV,CAAL,CAAuB4B,IAAvB,EAAD,CAAZ;IACAvC,UAAU,CAACT,QAAQ,CAACoB,MAAT,KAAoB,CAApB,GAAwB,IAAxB,GAA+B,KAAhC,CAAV;EACD,CAHQ,EAGN,CAACpB,QAAD,CAHM,CAAT;EAKAP,SAAS,CAAC,MAAM;IACdoD,mBAAmB;EACpB,CAFQ,EAEN,CAAC7C,QAAD,EAAWE,aAAX,EAA0BE,SAA1B,CAFM,CAAT;EAIA,oBACE;IAAK,SAAS,EAAE,CAAC,WAAD,EAAcN,UAAU,IAAI,aAA5B,EAA2CmD,IAA3C,CAAgD,GAAhD,CAAhB;IAAA,wBACE;MAAK,SAAS,EAAC,SAAf;MAAA,wBACE;QAAA,oBAAY/C,aAAZ;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAM,OAAO,EAAEL,UAAf;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAKE;MAAK,SAAS,EAAC,UAAf;MAAA,WACGW,OAAO,iBACN;QAAK,SAAS,EAAC,OAAf;QAAA,uBACE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QAFJ,eAME;QAAK,SAAS,EAAC,qBAAf;QAAA,UACGR,QAAQ,CAACkD,GAAT,CAAa,CAAClD,QAAD,EAAW2B,GAAX,KAAmB;UAC/B,oBACE,QAAC,UAAD;YAEE,QAAQ,EAAE3B,QAFZ;YAGE,qBAAqB,EAAEmB,qBAHzB;YAIE,qBAAqB,EAAEE,qBAJzB;YAKE,SAAS,EAAEjB,SALb;YAME,GAAG,EAAEuB,GANP;YAOE,YAAY,EAAEtB,YAPhB;YAQE,cAAc,EAAEuB,cARlB;YASE,KAAK,EAAEjB,KATT;YAUE,UAAU,EAAEb;UAVd,GACOE,QAAQ,CAAC6B,UADhB;YAAA;YAAA;YAAA;UAAA,QADF;QAcD,CAfA;MADH;QAAA;QAAA;QAAA;MAAA,QANF;IAAA;MAAA;MAAA;MAAA;IAAA,QALF,eA8BE;MACE,SAAS,EAAC,YADZ;MAEE,OAAO,EAAE,MAAM;QACb,IAAIlB,KAAJ,EAAW;UACTD,QAAQ,CAAC,MAAD,CAAR;UACAI,QAAQ;UACRf,aAAa,CAAC,KAAD,CAAb;QACD,CAJD,MAIO;UACLoD,KAAK,CAAC,iBAAD,CAAL;UACAzC,QAAQ,CAAC,QAAD,CAAR;QACD;MACF,CAXH;MAAA,uBAaE;QAAA,qBAAQJ,UAAR;MAAA;QAAA;QAAA;QAAA;MAAA;IAbF;MAAA;MAAA;MAAA;IAAA,QA9BF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAgDD,CAvJD;;GAAMV,I;UAMaF,W;;;KANbE,I;AAyJN,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}