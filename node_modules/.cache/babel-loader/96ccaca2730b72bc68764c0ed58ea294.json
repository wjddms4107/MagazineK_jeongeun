{"ast":null,"code":"var _jsxFileName = \"/Users/nojeong-eun/Desktop/MagazineK_jeongeun/src/components/Nav/Search.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport SearchedProd from './SearchedProd';\nimport SearchPageList from './SearchPageList';\nimport './Search.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Search = () => {\n  _s();\n\n  const [productList, setProductList] = useState([]);\n  const [searchParams] = useSearchParams();\n  const [isfilled, setIsfilled] = useState(true);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const navigate = useNavigate();\n  const searchValue = searchParams.get('keyword');\n  const limit = 12;\n  const pageNum = Math.ceil(total / limit);\n  let offset = (page - 1) * limit;\n  const pgPrev = parseInt(page) - 1 ? parseInt(page) - 1 : 1;\n  const pgNext = parseInt(page) === pageNum ? page : parseInt(page) + 1;\n\n  const moveToSearch = e => {\n    const searchValue = e.target.keyword.value;\n    navigate(`/Search?keyword=${searchValue}`);\n  };\n\n  const scrollUp = () => {\n    window.scroll({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n\n  const movePage = page => {\n    setPage(() => page);\n    offset = (page - 1) * limit;\n  };\n\n  const confirmSearchValueIsVaild = () => {\n    if (!searchValue) {\n      setIsfilled(searchValue ? true : false);\n    } else if (productList.length === 0) {\n      setIsfilled(false);\n    } else {\n      setIsfilled(true);\n    }\n  };\n\n  const getSearchData = () => {\n    fetch(`http://10.58.3.49:8000/products?offset=${offset}&limit=${limit}&keyword=${searchValue}`).then(res => res.json()).then(res => {\n      setProductList(res.result[0].products);\n      setTotal(res.result[0].total_count);\n    });\n  };\n\n  useEffect(() => {\n    getSearchData();\n  }, [offset, limit, searchValue]);\n  useEffect(() => {\n    confirmSearchValueIsVaild();\n  }, [searchValue, productList.length]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"searchContainer\",\n      onSubmit: e => {\n        moveToSearch(e);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"searchBar\",\n        type: \"text\",\n        name: \"keyword\",\n        placeholder: \"Search Brand, City, Food...\",\n        defaultValue: searchValue,\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), isfilled && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"searchedProdsContainer\",\n      children: [productList.map(prod => {\n        return /*#__PURE__*/_jsxDEV(SearchedProd, {\n          prod: prod\n        }, prod.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 20\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(SearchPageList, {\n        total: total,\n        pgNext: pgNext,\n        pgPrev: pgPrev,\n        limit: limit,\n        scrollUp: scrollUp,\n        movePage: movePage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), !isfilled && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"noResult\",\n      children: \"\\uAC80\\uC0C9 \\uACB0\\uACFC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Search, \"90AohKmhIwJjSUKUITunQw2c8xg=\", false, function () {\n  return [useSearchParams, useNavigate];\n});\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useSearchParams","SearchedProd","SearchPageList","Search","productList","setProductList","searchParams","isfilled","setIsfilled","total","setTotal","page","setPage","navigate","searchValue","get","limit","pageNum","Math","ceil","offset","pgPrev","parseInt","pgNext","moveToSearch","e","target","keyword","value","scrollUp","window","scroll","top","behavior","movePage","confirmSearchValueIsVaild","length","getSearchData","fetch","then","res","json","result","products","total_count","map","prod","id"],"sources":["/Users/nojeong-eun/Desktop/MagazineK_jeongeun/src/components/Nav/Search.js"],"sourcesContent":["import React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport SearchedProd from './SearchedProd';\nimport SearchPageList from './SearchPageList';\nimport './Search.scss';\n\nconst Search = () => {\n  const [productList, setProductList] = useState([]);\n  const [searchParams] = useSearchParams();\n  const [isfilled, setIsfilled] = useState(true);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n\n  const navigate = useNavigate();\n  const searchValue = searchParams.get('keyword');\n  const limit = 12;\n  const pageNum = Math.ceil(total / limit);\n  let offset = (page - 1) * limit;\n\n  const pgPrev = parseInt(page) - 1 ? parseInt(page) - 1 : 1;\n  const pgNext = parseInt(page) === pageNum ? page : parseInt(page) + 1;\n\n  const moveToSearch = e => {\n    const searchValue = e.target.keyword.value;\n    navigate(`/Search?keyword=${searchValue}`);\n  };\n\n  const scrollUp = () => {\n    window.scroll({\n      top: 0,\n      behavior: 'smooth',\n    });\n  };\n\n  const movePage = page => {\n    setPage(() => page);\n    offset = (page - 1) * limit;\n  };\n\n  const confirmSearchValueIsVaild = () => {\n    if (!searchValue) {\n      setIsfilled(searchValue ? true : false);\n    } else if (productList.length === 0) {\n      setIsfilled(false);\n    } else {\n      setIsfilled(true);\n    }\n  };\n\n  const getSearchData = () => {\n    fetch(\n      `http://10.58.3.49:8000/products?offset=${offset}&limit=${limit}&keyword=${searchValue}`\n    )\n      .then(res => res.json())\n      .then(res => {\n        setProductList(res.result[0].products);\n        setTotal(res.result[0].total_count);\n      });\n  };\n\n  useEffect(() => {\n    getSearchData();\n  }, [offset, limit, searchValue]);\n\n  useEffect(() => {\n    confirmSearchValueIsVaild();\n  }, [searchValue, productList.length]);\n\n  return (\n    <div className=\"search\">\n      <form\n        className=\"searchContainer\"\n        onSubmit={e => {\n          moveToSearch(e);\n        }}\n      >\n        <input\n          className=\"searchBar\"\n          type=\"text\"\n          name=\"keyword\"\n          placeholder=\"Search Brand, City, Food...\"\n          defaultValue={searchValue}\n          autoFocus\n        />\n      </form>\n      {isfilled && (\n        <div className=\"searchedProdsContainer\">\n          {productList.map(prod => {\n            return <SearchedProd key={prod.id} prod={prod} />;\n          })}\n          <SearchPageList\n            total={total}\n            pgNext={pgNext}\n            pgPrev={pgPrev}\n            limit={limit}\n            scrollUp={scrollUp}\n            movePage={movePage}\n          />\n        </div>\n      )}\n      {!isfilled && <div className=\"noResult\">검색 결과가 없습니다.</div>}\n    </div>\n  );\n};\n\nexport default Search;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}