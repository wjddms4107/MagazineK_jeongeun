{"ast":null,"code":"var _jsxFileName = \"/Users/nojeong-eun/Desktop/MagazineK_jeongeun/src/pages/ProductList/ProductList.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport MenuTap from './MenuTap';\nimport Product from './Product';\nimport PageList from './PageList';\nimport './ProductList.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProductList = _ref => {\n  _s();\n\n  let {\n    modalState,\n    setModalState\n  } = _ref;\n  const navigate = useNavigate();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [prodList, setProdList] = useState([]);\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(0);\n  const [limit, setLimit] = useState(10);\n  const [sort, setSort] = useState('latest_issue');\n  const [isClickedList, setIsClickedList] = useState([]);\n  const category = searchParams.get('category');\n  const pageNum = Math.ceil(total / limit);\n  let offset = (page - 1) * limit;\n  const pgPrev = parseInt(page) - 1 ? parseInt(page) - 1 : 1;\n  const pgNext = parseInt(page) === pageNum ? page : parseInt(page) + 1;\n\n  const movePage = (category, page) => {\n    setPage(() => page);\n    offset = (page - 1) * limit;\n    navigate(`?category=${category}`);\n  };\n\n  const scrollUp = () => {\n    window.scroll({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n\n  const getProductList = () => {\n    fetch(`http://10.58.3.49:8000/products?category=${parseInt(category)}&offset=${offset}&limit=${limit}&sort_by=${sort}`).then(res => res.json()).then(res => {\n      setTotal(res.result[0].total_count);\n      setProdList(res.result[0].products);\n    });\n  };\n\n  useEffect(() => {\n    setSearchParams({\n      category: 1\n    });\n  }, []);\n  useEffect(() => {\n    getProductList();\n  }, [category, offset, limit, sort]);\n  useEffect(() => {\n    setIsClickedList(Array(MENU_LIST.length).fill(true));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"productListPage\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menuTapContainer\",\n      children: [MENU_LIST.map((menu, idx) => /*#__PURE__*/_jsxDEV(MenuTap, {\n        menu: menu,\n        movePage: movePage,\n        isClickedList: isClickedList,\n        idx: idx,\n        scrollUp: scrollUp\n      }, menu.category, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"prodNumPerPage\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"totalNum\",\n          children: [\"TOTAL \", total]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"numPerPageWrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"numPerPageText\",\n            children: \"NUMBER PER PAGE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"numPerPage\",\n            onChange: e => {\n              setLimit(e.target.value);\n              scrollUp();\n            },\n            defaultValue: \"10\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"20\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sortWrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"sort\",\n            onChange: e => {\n              setSort(e.target.value);\n              scrollUp();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"SORT BY\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"latest_issue\",\n              children: \"\\uCD5C\\uC2E0\\uC21C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"oldest_issue\",\n              children: \"\\uC624\\uB798\\uB41C \\uC21C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"high_price\",\n              children: \"\\uB192\\uC740\\uAC00\\uACA9 \\uC21C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"low_price\",\n              children: \"\\uB0AE\\uC740\\uAC00\\uACA9 \\uC21C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"prodlistContainer\",\n      children: [prodList.map(prod => /*#__PURE__*/_jsxDEV(Product, {\n        prod: prod,\n        category: category,\n        modalState: modalState,\n        setModalState: setModalState\n      }, Math.random(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(PageList, {\n        total: total,\n        movePage: movePage,\n        pgNext: pgNext,\n        pgPrev: pgPrev,\n        category: category,\n        limit: limit,\n        scrollUp: scrollUp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductList, \"LswxkVA7zaCAGPc0wreM/FTCfoU=\", false, function () {\n  return [useNavigate, useSearchParams];\n});\n\n_c = ProductList;\nexport default ProductList;\nconst MENU_LIST = [{\n  category: 1,\n  cate_name: 'Magazine K'\n}, {\n  category: 2,\n  cate_name: 'Fashion'\n}, {\n  category: 3,\n  cate_name: 'Beauty'\n}, {\n  category: 4,\n  cate_name: 'Design Lifestyle'\n}, {\n  category: 5,\n  cate_name: 'Food'\n}];\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useState","useEffect","useSearchParams","useNavigate","MenuTap","Product","PageList","ProductList","modalState","setModalState","navigate","searchParams","setSearchParams","prodList","setProdList","page","setPage","total","setTotal","limit","setLimit","sort","setSort","isClickedList","setIsClickedList","category","get","pageNum","Math","ceil","offset","pgPrev","parseInt","pgNext","movePage","scrollUp","window","scroll","top","behavior","getProductList","fetch","then","res","json","result","total_count","products","Array","MENU_LIST","length","fill","map","menu","idx","e","target","value","prod","random","cate_name"],"sources":["/Users/nojeong-eun/Desktop/MagazineK_jeongeun/src/pages/ProductList/ProductList.js"],"sourcesContent":["import React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport MenuTap from './MenuTap';\nimport Product from './Product';\nimport PageList from './PageList';\nimport './ProductList.scss';\n\nconst ProductList = ({ modalState, setModalState }) => {\n  const navigate = useNavigate();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [prodList, setProdList] = useState([]);\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(0);\n  const [limit, setLimit] = useState(10);\n  const [sort, setSort] = useState('latest_issue');\n  const [isClickedList, setIsClickedList] = useState([]);\n  const category = searchParams.get('category');\n  const pageNum = Math.ceil(total / limit);\n  let offset = (page - 1) * limit;\n\n  const pgPrev = parseInt(page) - 1 ? parseInt(page) - 1 : 1;\n  const pgNext = parseInt(page) === pageNum ? page : parseInt(page) + 1;\n  const movePage = (category, page) => {\n    setPage(() => page);\n    offset = (page - 1) * limit;\n    navigate(`?category=${category}`);\n  };\n\n  const scrollUp = () => {\n    window.scroll({\n      top: 0,\n      behavior: 'smooth',\n    });\n  };\n\n  const getProductList = () => {\n    fetch(\n      `http://10.58.3.49:8000/products?category=${parseInt(\n        category\n      )}&offset=${offset}&limit=${limit}&sort_by=${sort}`\n    )\n      .then(res => res.json())\n      .then(res => {\n        setTotal(res.result[0].total_count);\n        setProdList(res.result[0].products);\n      });\n  };\n\n  useEffect(() => {\n    setSearchParams({ category: 1 });\n  }, []);\n\n  useEffect(() => {\n    getProductList();\n  }, [category, offset, limit, sort]);\n\n  useEffect(() => {\n    setIsClickedList(Array(MENU_LIST.length).fill(true));\n  }, []);\n\n  return (\n    <div className=\"productListPage\">\n      <div className=\"menuTapContainer\">\n        {MENU_LIST.map((menu, idx) => (\n          <MenuTap\n            key={menu.category}\n            menu={menu}\n            movePage={movePage}\n            isClickedList={isClickedList}\n            idx={idx}\n            scrollUp={scrollUp}\n          />\n        ))}\n        <div className=\"prodNumPerPage\">\n          <span className=\"totalNum\">TOTAL {total}</span>\n          <div className=\"numPerPageWrapper\">\n            <span className=\"numPerPageText\">NUMBER PER PAGE</span>\n            <select\n              className=\"numPerPage\"\n              onChange={e => {\n                setLimit(e.target.value);\n                scrollUp();\n              }}\n              defaultValue=\"10\"\n            >\n              <option>5</option>\n              <option>10</option>\n              <option>20</option>\n            </select>\n          </div>\n          <div className=\"sortWrapper\">\n            <select\n              className=\"sort\"\n              onChange={e => {\n                setSort(e.target.value);\n                scrollUp();\n              }}\n            >\n              <option>SORT BY</option>\n              <option value=\"latest_issue\">최신순</option>\n              <option value=\"oldest_issue\">오래된 순</option>\n              <option value=\"high_price\">높은가격 순</option>\n              <option value=\"low_price\">낮은가격 순</option>\n            </select>\n          </div>\n        </div>\n      </div>\n      <div className=\"prodlistContainer\">\n        {/* {prodList.slice(offset, limit * page).map(prod => ( */}\n        {prodList.map(prod => (\n          <Product\n            key={Math.random()}\n            prod={prod}\n            category={category}\n            modalState={modalState}\n            setModalState={setModalState}\n          />\n        ))}\n        <PageList\n          total={total}\n          movePage={movePage}\n          pgNext={pgNext}\n          pgPrev={pgPrev}\n          category={category}\n          limit={limit}\n          scrollUp={scrollUp}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ProductList;\n\nconst MENU_LIST = [\n  {\n    category: 1,\n    cate_name: 'Magazine K',\n  },\n  {\n    category: 2,\n    cate_name: 'Fashion',\n  },\n  {\n    category: 3,\n    cate_name: 'Beauty',\n  },\n  {\n    category: 4,\n    cate_name: 'Design Lifestyle',\n  },\n  {\n    category: 5,\n    cate_name: 'Food',\n  },\n];\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}